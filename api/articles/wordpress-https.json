{"title":"配置Wordpress使网站强制HTTPS访问","uid":"c24bf6860b3681d01b2e59b76b535050","slug":"wordpress-https","date":"2016-01-26T02:37:41.000Z","updated":"2024-11-27T07:51:40.218Z","comments":true,"path":"api/articles/wordpress-https.json","keywords":"逃跑计划,Blog,Developer,Front-end,前端,Apple,小技巧","cover":"https://cdn.blog.hopenet.tech/thumbnail/wordpress-https.png","content":"<p>HTTPS协议越来越普及，Google、百度等搜索引擎也大大地对HTTPS增加友好度各大网站也开启了全站SSL，比如淘宝、百度等，也意味着互联网HTTPS时代的到来。</p>\n<p>为了跟上互联网时代的热潮，大家跟我一起来简单的配置即可开启全站HTTPS强制访问！</p>\n<span id=\"more\"></span>\n\n<hr>\n<p>1.将配置好的SSL证书添加到服务器&#x2F;面板，并手动输入：https:&#x2F;&#x2F;你的网站&#x2F;</p>\n<p>2.进入WP后台，进入设置-常规 将WordPress地址（URL）、站点地址（URL）两项修改为：https</p>\n<p>3.修改config.php文件，在末尾添加代码</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 强制后台和登录使用 SSL */</span></span><br><span class=\"line\"><span class=\"title function_ invoke__\">define</span>(<span class=\"string\">&#x27;FORCE_SSL_LOGIN&#x27;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">define</span>(<span class=\"string\">&#x27;FORCE_SSL_ADMIN&#x27;</span>, <span class=\"literal\">true</span>);</span><br></pre></td></tr></table></figure>\n<p>修改完成后你会发现打开网站后，进入文章、后台，已经自动帮你跳转到https了</p>\n<p>4.既然修改了网址，那最基本的图片也要让它变成https！</p>\n<p>在function.php文件末尾处添加代码：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 替换图片链接为 https */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">my_content_manipulator</span>(<span class=\"params\"><span class=\"variable\">$content</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>( <span class=\"title function_ invoke__\">is_ssl</span>() )&#123;</span><br><span class=\"line\">        <span class=\"variable\">$content</span> = <span class=\"title function_ invoke__\">str_replace</span>(<span class=\"string\">&#x27;http://cehu.top/wp-content/uploads&#x27;</span>, <span class=\"string\">&#x27;https://cehu.top/wp-content/uploads&#x27;</span>, <span class=\"variable\">$content</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$content</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">add_filter</span>(<span class=\"string\">&#x27;the_content&#x27;</span>, <span class=\"string\">&#x27;my_content_manipulator&#x27;</span>);</span><br><span class=\"line\">`</span><br></pre></td></tr></table></figure>\n\n<p>将代码上的cehu.top修改为你的域名</p>\n<p>5.配置.htaccess文件，使网站301重定向到HTTPS (注意！这个操作会使网站无法正常访问http)</p>\n<p>在你博客空间的www目录（有的可能是 public_html）下，找到.htaccess文件，编辑它，在里边填入下列代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">#网站定制化开启 HTTPS 的301重定向</span><br><span class=\"line\">&amp;lt;IfModule mod_rewrite.c&amp;gt;</span><br><span class=\"line\">RewriteEngine On</span><br><span class=\"line\">RewriteCond %&#123;HTTPS&#125; !^on$ [NC]</span><br><span class=\"line\">RewriteRule (.*) https://%&#123;SERVER_NAME&#125;%&#123;REQUEST_URI&#125; [L,R=301]</span><br><span class=\"line\">RewriteBase /</span><br><span class=\"line\">RewriteRule ^index\\.php$ - [L]</span><br><span class=\"line\">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class=\"line\">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class=\"line\">RewriteRule . /index.php [L]</span><br><span class=\"line\">&amp;lt;/IfModule&amp;gt;</span><br></pre></td></tr></table></figure>\n<p>ls -a 即可看到.htaccess文件</p>\n<p>一切皆以完成！</p>\n","text":"HTTPS协议越来越普及，Google、百度等搜索引擎也大大地对HTTPS增加友好度各大网站也开启了全站SSL，比如淘宝、百度等，也意味着互联网HTTPS时代的...","permalink":"/post/wordpress-https","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"技术栈","slug":"技术栈","count":2,"path":"api/categories/技术栈.json"}],"tags":[{"name":"WordPress","slug":"WordPress","count":2,"path":"api/tags/WordPress.json"},{"name":"HTTPS","slug":"HTTPS","count":1,"path":"api/tags/HTTPS.json"}],"toc":"","author":{"name":"Andy","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"愿风指引着你的道路，愿你的刀刃永远锋利","socials":{"github":"https://github.com/liwuxi","twitter":"https://twitter.com/imwuxi","stackoverflow":"","wechat":"","qq":"","weibo":"https://www.weibo.com/imlevis","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Mail函数禁用下添加WordPress评论回复邮件通知","uid":"c87e7ce638abc19774c3ede9965f3d29","slug":"wordpress-email","date":"2016-08-03T07:38:19.000Z","updated":"2024-11-27T07:51:40.218Z","comments":true,"path":"api/articles/wordpress-email.json","keywords":"逃跑计划,Blog,Developer,Front-end,前端,Apple,小技巧","cover":"https://cdn.blog.hopenet.tech/thumbnail/smtp-email.png","text":"本次教程利用插件在虚拟主机 Or VPS 在 Mail 函数被禁用的情况下，添加WordPress评论回复邮件通知功能，更好的对用户进行交流。 自己折腾了好久，...","permalink":"/post/wordpress-email","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"技术栈","slug":"技术栈","count":2,"path":"api/categories/技术栈.json"}],"tags":[{"name":"WordPress","slug":"WordPress","count":2,"path":"api/tags/WordPress.json"},{"name":"Mail","slug":"Mail","count":1,"path":"api/tags/Mail.json"}],"author":{"name":"Andy","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"愿风指引着你的道路，愿你的刀刃永远锋利","socials":{"github":"https://github.com/liwuxi","twitter":"https://twitter.com/imwuxi","stackoverflow":"","wechat":"","qq":"","weibo":"https://www.weibo.com/imlevis","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"极致好用！一款开源的VestaCP面板","uid":"329b7a09562d564b19523b67f5be120b","slug":"vestacp","date":"2016-01-16T08:33:44.000Z","updated":"2024-11-27T07:51:40.217Z","comments":true,"path":"api/articles/vestacp.json","keywords":"逃跑计划,Blog,Developer,Front-end,前端,Apple,小技巧","cover":"https://cdn.blog.hopenet.tech/thumbnail/vests.png","text":"VestaCP是由俄罗斯的人编写的VPS主机控制面板，支持中文，Vestacp功能强大，基本上已经和Cpanel看齐。支持Apache、Nginx、Bind、E...","permalink":"/post/vestacp","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"测评","slug":"测评","count":2,"path":"api/categories/测评.json"}],"tags":[{"name":"Linux","slug":"Linux","count":1,"path":"api/tags/Linux.json"},{"name":"VPS","slug":"VPS","count":1,"path":"api/tags/VPS.json"},{"name":"面板","slug":"面板","count":1,"path":"api/tags/面板.json"}],"author":{"name":"Andy","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"愿风指引着你的道路，愿你的刀刃永远锋利","socials":{"github":"https://github.com/liwuxi","twitter":"https://twitter.com/imwuxi","stackoverflow":"","wechat":"","qq":"","weibo":"https://www.weibo.com/imlevis","zhihu":"","csdn":"","juejin":"","customs":{}}}}}